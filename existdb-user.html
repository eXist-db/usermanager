<link rel="import" href="bower_components/polymer/polymer-element.html">
<link rel="import" href="bower_components/paper-styles/color.html">
<link rel="import" href="bower_components/paper-styles/typography.html">
<link rel="import" href="bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="bower_components/paper-input/paper-input.html">
<link rel="import" href="bower_components/paper-password-input/paper-password-input.html">
<link rel="import" href="bower_components/paper-password-input/match-passwords-validator.html">
<link rel="import" href="bower_components/paper-toggle-button/paper-toggle-button.html">
<link rel="import" href="bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="bower_components/paper-item/paper-item.html">
<link rel="import" href="bower_components/paper-button/paper-button.html">
<link rel="import" href="bower_components/iron-icons/iron-icons.html">
<link rel="import" href="bower_components/iron-icons/social-icons.html">
<link rel="import" href="bower_components/iron-icon/iron-icon.html">

<link rel="import" href="bower_components/polymer/lib/elements/dom-repeat.html">



<dom-module id="existdb-user">
    <template>
        <style>
            :host {
                display: block;
                @apply(--paper-font-common-base);
                padding: 0;
                margin: 0;
                padding-left:60px;
                position: relative;
                min-height: 100px;
            }

            iron-icon.user-icon {
                position: absolute;
                left: 10px;
                top: 10px;
                width: 50px;
                height: 50px;
            }

            .user {
                font-weight: 500;
                font-size: 20px;
                @apply(--paper-font-common-code);

            }

            .fullname, .description {
                display: block;
                font-size: 12px;
            }


        </style>

        <div class="user-entry">
            <iron-icon class="icon user-icon" icon="social:person"></iron-icon>
            <span class="user" title="User Name">[[data.user]]</span>
            <span class="fullname">{{data.fullName}}</span>
            <span class="description">{{data.description}}</span>


            <div class="details">
                <paper-input label="User Name" required value="{{data.user}}"
                             class="username"></paper-input>
                <paper-input label="Full Name" value="{{data.fullName}}"></paper-input>
                <paper-input label="Description" value="{{data.description}}"></paper-input>

                <match-passwords-validator id="match-passwords-validator" password="[[data.password]]"></match-passwords-validator>
                <paper-password-input label="Password" value="{{data.password}}"></paper-password-input>
                <paper-password-input label="Confirm" auto-validate validator="match-passwords-validator"
                                      error-message="Passwords need to match"></paper-password-input>

                <paper-toggle-button class="accountActive" checked$="{{data.disabled}}">Account is disabled</paper-toggle-button>
                <paper-input label="umask" value="022"></paper-input>

                <div class="member-heading">Member of groups</div>

                <paper-listbox id="memberOf" class="groupsOfUser" multi attr-for-selected="label">
                    <template is="dom-repeat" items="{{data.groups}}" as="member">
                        <paper-item label="{{member.group}}" on-tap="_handleGroupItem">{{member.group}}</paper-item>
                    </template>
                </paper-listbox>
                <paper-button id="save" class="save" on-tap="_handleSaveUser">save changes</paper-button>
                <paper-button id="delete" class="delete" on-tap="_handleDeleteUser">delete user</paper-button>
            </div>
        </div>

    </template>

    <script>
        class ExistdbUser extends Polymer.Element {
            static get is() {
                return 'existdb-user';
            }

            static get properties() {
                return {
                    data:{
                        type: Object,
//                        reflectToAttribute:true,
                        value:{
//                            "user":"bar",
                        }
                    },
                    groups: {
                        type: Array,
                        value:[]
                    }
                }
            }

            constructor() {
                super();
                console.log("ExistdbUser constructor...")
            }

            connectedCallback() {
                super.connectedCallback();
                console.log("ExistdbUser connected")
                console.log("ExistdbUser foo: ", this.data);

            }


            _isHidden(item){

            }

        }
        customElements.define(ExistdbUser.is, ExistdbUser);
    </script>
</dom-module>
